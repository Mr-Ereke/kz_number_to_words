env:
  global:
    - CC_TEST_REPORTER_ID=663c7b027ae8bb583a674e8aa9787d0046d1d7c143772eb7881a834b27614d7a
language: php
php:
- '7.4'
install:
- composer install
before_script:
- GIT_COMMIT_SHA=$TRAVIS_PULL_REQUEST_SHA
- GIT_BRANCH=$TRAVIS_PULL_REQUEST_BRANCH
- phpenv config-add xdebug.ini
- curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64
  > ~/cc-test-reporter
- chmod a+x ~/cc-test-reporter
- "~/cc-test-reporter before-build"
script:
- make build
after_script:
- "~/cc-test-reporter after-build --exit-code $TRAVIS_TEST_RESULT"
